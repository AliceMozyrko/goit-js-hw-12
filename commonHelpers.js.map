{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const markup = images => {\n  return images.map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\" \n              alt=\"${tags}\" \n            />\n          </a>\n          <div class=\"card-body\">\n              <p class=\"text-body\"><span class=\"bigger-text\">Likes: </span>${likes}</p>\n              <p class=\"text-body\"><span class=\"bigger-text\">Views: </span>${views}</p>\n              <p class=\"text-body\"><span class=\"bigger-text\">Comments: </span>${comments}</p>\n              <p class=\"text-body\"><span class=\"bigger-text\">Downloads: </span>${downloads}</p>\n          </div>\n      </li>\n      `\n  )\n    .join(\"\")\n};\n\n\n\n\n\n","import axios from 'axios';\n\nconst API_KEY = \"43811002-0821001961ff17859e55caea7\"\nconst BASE_URL = \"https://pixabay.com/\"\naxios.defaults.baseURL = BASE_URL\n\nexport const fetchPhotos = (query, imgPage = 1) => {\n  const searchParams = {\n    q: query,\n    key: API_KEY,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 15,\n    page: imgPage,\n  }\n\n  return axios.get(\"api/\", {\n    params: {\n      ...searchParams,\n    },\n  })\n}","\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { markup } from \"./js/render-functions.js\";\nimport { fetchPhotos } from \"./js/pixabay-api.js\";\n\nconst galleryEl = document.querySelector(\".gallery-list\")\nconst searchFormEl = document.querySelector(\".search-form\")\nconst loaderEl = document.querySelector(\".loader\")\nconst loadBtn = document.querySelector(\".btn-load-more\")\n\nloaderEl.classList.add(\"is-hidden\")\nloadBtn.classList.add(\"is-hidden\")\n\nlet searchQuery = \"\"\nlet currentPage = 1\nlet totalPages;\n \nasync function onSearchFormSubmit(event) {\n  event.preventDefault()\n  searchQuery = event.target.elements.query.value.trim()\n  currentPage = 1;\n  console.log(searchQuery);\n  if (searchQuery === \"\") {\n    galleryEl.innerHTML = \"\"\n    event.target.reset()\n    iziToast.error({\n      message: \"Input field can't be empty\",\n      timeout: 3000,\n    })\n    return;\n  }\n\n  galleryEl.innerHTML = \"\";\n  loaderEl.classList.remove(\"is-hidden\")\n  loadBtn.classList.add(\"is-hidden\");\n\n  try {\n    const {totalHits, data} = await fetchPhotos(searchQuery, currentPage) \n    if (data.total === 0) {\n        iziToast.error({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        timeout: 3000,\n        })\n      loaderEl.classList.add(\"is-hidden\");\n      event.target.reset()\n      return;\n    }\n    galleryEl.innerHTML = markup(data.hits); \n    totalPages = Math.ceil(data.totalHits / 15)\n    \n    if (data.totalHits < 15) {\n      loadBtn.classList.add(\"is-hidden\");\n      iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\", \n        timeout: 3000,\n      })  \n  } else {\n      loadBtn.classList.remove(\"is-hidden\")\n      }\n    \n    lightbox.refresh();\n\n  } catch (error) {\n    console.log(error)\n  }\n\n  event.target.reset()\n  loaderEl.classList.add(\"is-hidden\")\n}\n\nloadBtn.addEventListener(\"click\", async (event) => {\n  loaderEl.classList.remove(\"is-hidden\"); currentPage += 1\n  loadBtn.classList.add(\"is-hidden\")\n  const {data} = await fetchPhotos(searchQuery, currentPage) \n  galleryEl.insertAdjacentHTML(\"beforeend\", markup(data.hits))\n  loaderEl.classList.add(\"is-hidden\")\n  loadBtn.classList.remove(\"is-hidden\")\n  scrollGallery();\n  lightbox.refresh();\n  \n  if (currentPage >= totalPages ) {\n     loadBtn.classList.add(\"is-hidden\");\n     iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\", \n        timeout: 3000,\n     }) \n  }\n})\n\n\nfunction scrollGallery() {\n  const { height } = galleryEl.getBoundingClientRect();\n  window.scrollBy({\n  top: height * 2,\n  behavior: \"smooth\",\n});\n}\n\nsearchFormEl.addEventListener(\"submit\", onSearchFormSubmit)\nconst lightbox = new SimpleLightbox('.gallery-link');"],"names":["markup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","BASE_URL","axios","fetchPhotos","query","imgPage","searchParams","galleryEl","searchFormEl","loaderEl","loadBtn","searchQuery","currentPage","totalPages","onSearchFormSubmit","event","iziToast","totalHits","data","lightbox","error","scrollGallery","height","SimpleLightbox"],"mappings":"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"}